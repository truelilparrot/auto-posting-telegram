import asyncio
from telethon.sync import TelegramClient
import telethon.errors
from datetime import datetime
import hashlib

API_ID = '29855317'
API_HASH = '4ff949bc8cb40a2ba6ffb2a97094e5f9'

group_intervals = {
    -1001666613878: 3600,  
    -1001638962933: 900,       
    -1001760556871: 900,       
    -1001726437136: 3600,
    -1001642354555: 300,  
    -1001848151282: 900,       
    -1001578820122: 3600,       
    -1001770202571: 3600,
    -1001472958501: 3600, 
    -1001697807406: 3600,       
    -1001609480325: 3600,
    -1001848528594: 60,
    -1001726437136: 3600
}

image_path = "D:\zzz\photo_2021-09-30-22.37.13-1.jpeg"
message = '''
â€¼HOT SPOT (30ml) 60mgâ€¼
ğŸš¨Ğ¡Ñ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ğŸš¨
Ğ’ĞºÑƒÑÑ‹ğŸ‘‰
ğŸ”¥Ğ¡Ğ¼Ğ¾Ñ€Ğ¾Ğ´Ğ¸Ğ½Ğ°-Ğ¼ÑÑ‚Ğ°ğŸ«ğŸƒ
ğŸ”¥Ğ•Ğ¶ĞµĞ²Ğ¸ĞºĞ°-Ğ°Ğ½Ğ°Ğ½Ğ°ÑğŸ 
ğŸ”¥Ğ¡Ğ²ĞµĞ¶Ğ°Ñ-Ğ¼ÑÑ‚Ğ°ğŸƒğŸ§Š
ğŸ”¥ĞŸĞµÑ€ÑĞ¸Ğº-Ğ¼Ğ°Ñ€Ğ°ĞºÑƒĞ¹Ñ ğŸ‘
ğŸ”¥ĞšĞ¾ĞºĞ¾Ñ-Ğ°Ğ½Ğ°Ğ½Ğ°ÑğŸğŸ¥¥
ğŸ”¥Ğ¥Ğ²Ğ¾Ñ-Ğ³Ñ€ĞµĞ¹Ğ¿Ñ„Ñ€ÑƒÑ‚ğŸŒ²
ğŸ”¥ĞœĞ°Ğ½Ğ³Ğ¾-Ğ³Ñ€ĞµĞ¹Ğ¿Ñ„Ñ€ÑƒÑ‚ğŸ¥­ 
ğŸ”¥ĞšĞ¸Ğ²Ğ¸-Ğ¿Ğ¾Ğ¼ĞµĞ»Ğ¾ğŸ¥
ğŸ”¥ĞšĞ¸Ğ²Ğ¸ Ğ±Ğ°Ğ½Ğ°Ğ½ğŸŒ ğŸ¥
ğŸ”¥Ğ§ĞµÑ€Ğ½Ğ¸ĞºĞ°-Ğ´Ñ‹Ğ½Ñ ğŸ«ğŸˆ
Ğ›Ğ¸Ñ‡Ğ¸-Ğ»Ğ°Ğ¹Ğ¼ ğŸ‹
ĞšĞ¸ÑĞ»Ñ‹Ğµ Ğ»ĞµÑĞ½Ñ‹Ğµ ÑĞ³Ğ¾Ğ´Ñ‹ğŸ«
Ğ–Ğ²Ğ°Ñ‡ĞºĞ° Ğ²Ğ¸ÑˆĞ½ÑğŸ’
Ğ–Ğ²Ğ°Ñ‡ĞºĞ° Ğ²Ğ¸Ğ½Ğ¾Ğ³Ñ€Ğ°Ğ´ğŸ‡ 
Ğ–Ğ²Ğ°Ñ‡ĞºĞ° Ğ°Ñ€Ğ±ÑƒĞ·ğŸ‰
Ğ–Ğ²Ğ°Ñ‡ĞºĞ° Ğ¿ĞµÑ€ÑĞ¸ĞºğŸ‘ 

ğŸ§ªHOT SPOT ACID 60mg
ğŸ”¹ĞšĞ¸ÑĞ»Ğ¾Ğµ ÑĞ±Ğ»Ğ¾ĞºĞ¾ğŸ

ğŸ§ªHOT SPOT ACID V2
ğŸ”¹ĞšĞ¸ÑĞ»Ñ‹Ğ¹ Ğ±Ğ°Ñ€Ğ±Ğ°Ñ€Ğ¸ÑğŸ¹
ğŸ”¹ĞšĞ¸ÑĞ»Ğ°Ñ Ğ²Ğ¸ÑˆĞ½ÑğŸ’
ğŸ”¹ĞšĞ¸ÑĞ»Ğ°Ñ Ğ±Ñ€ÑƒÑĞ½Ğ¸ĞºĞ° 
ğŸ”¹ĞšĞ¸ÑĞ»Ğ°Ñ ĞºÑ€Ğ°ÑĞ½Ğ°Ñ ÑĞ¼Ğ¾Ñ€Ğ¾Ğ´Ğ¸Ğ½Ğ°ğŸŸ¥ğŸ«
Ğ¦ĞµĞ½Ğ°:15Ñ€ğŸ¥°

ğŸ¤¯Podonki x ĞĞ½Ğ°Ñ€Ñ…Ğ¸Ñ  (70Ğ¼Ğ³)
ğŸ”»Ğ’ĞºÑƒÑÑ‹ :
ĞšĞ»ÑĞºĞ²ĞµĞ½Ğ½Ğ°Ñ ÑĞ¾Ğ´Ğ¾Ğ²Ğ°Ñ 
ĞšĞ»ÑĞºĞ²ĞµĞ½Ğ½Ğ°Ñ ÑĞ¾Ğ´Ğ¾Ğ²Ğ°ÑğŸ˜¨
ĞœĞ°Ğ½Ğ³Ğ¾ Ğ°Ğ¹ÑğŸ¥­ğŸ§Š
ĞĞ½Ğ°Ğ½Ğ°Ñ Ğ°Ğ¹ÑğŸğŸ§Š
Ğ”ÑÑˆĞµÑ Ğ°Ğ¹ÑğŸ¹ğŸ§Š
Ğ’Ğ¸Ğ½Ğ¾Ğ³Ñ€Ğ°Ğ´ Ğ°Ğ¹ÑğŸ‡ 
ĞœĞ°Ğ»Ğ¸Ğ½Ğ°-Ğ»Ğ¸Ñ‡Ğ¸ğŸª·
Ğ¢Ğ°Ñ€Ñ…ÑƒĞ½ Ğ¸ Ğ›Ğ¸Ğ¼Ğ¾Ğ½Ğ°Ğ´ğŸ¥¤
Ğ“Ñ€ÑƒÑˆĞ° Ñ ĞºĞ¾ĞºĞ¾ÑĞ¾Ğ¼ğŸ
ĞœĞ°Ğ»Ğ¸Ğ½Ğ° Ğ³Ñ€Ğ°Ğ½Ğ°Ñ‚ğŸª·

Ğ¦ĞµĞ½Ğ°:18Ñ€

Ğ¢Ğ°ĞºĞ¶Ğµ Ğ² Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸: 
âœ…ĞšĞ°Ñ€Ñ‚Ñ€Ğ¸Ğ´Ğ¶ Ğ½Ğ° Xros 0,8ohm-12Ñ€
âœ…Ğ˜ÑĞ¿Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ½Ğ° Charon Baby 0,6ohm-9Ñ€
âœ…Ğ˜ÑĞ¿Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ½Ğ° Charon Baby + -9Ñ€
âœ…ĞšĞ°Ñ‚Ñ€Ğ¸Ğ´Ğ¶ Ğ½Ğ° V.THRU 0,7ohm-12Ñ€
âœ…ĞšĞ°Ñ‚Ñ€Ğ¸Ğ´Ğ¶ Ğ½Ğ° Aegis nano 0,6 -11Ñ€
âœ…Ğ˜ÑĞ¿Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸ Ğ½Ğ° Aegis Boost, Aegis Boost Plus, Aegis Hero, Obelisk, Aegis Boost Pro, Aegis Hero 2   0,2ohm-13Ñ€

ğŸ’¯Ğ’ÑÑ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ†Ğ¸Ñ Ğ¡Ğ¢Ğ ĞĞ“Ğ ĞĞ Ğ˜Ğ“Ğ˜ĞĞĞ›ğŸ’¯
ğŸ†˜Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° Ğ¿Ğ¾ Ğ¼ĞµÑ‚Ñ€Ğ¾ğŸ†˜
Ğ—Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ¼ Ğ² Ğ›Ğ¡ğŸ‘‡
'''

async def send_messages(client, entity, interval):
    while True:
        try:
            print("Ğ–Ğ´Ñ‘Ğ¼...")
            with open(image_path, 'rb') as image_file:
                image_data = image_file.read()

            await client.send_file(entity, file=image_data, caption=message)

            now = datetime.now()
            current_time = now.strftime("%H:%M:%S")
            print(f"Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² ĞºĞ°Ğ½Ğ°Ğ» {entity.title} ({entity.id}) Ğ² {current_time}!")

        except telethon.errors.rpcerrorlist.SlowModeWaitError as e:
            print(f"ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ° SlowModeWaitError Ğ´Ğ»Ñ ĞºĞ°Ğ½Ğ°Ğ»Ğ° {entity.id}, Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ {e.seconds} ÑĞµĞºÑƒĞ½Ğ´...")
        except Exception as ex:
            print(f"ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² ĞºĞ°Ğ½Ğ°Ğ» {entity.id}: {ex}")

        await asyncio.sleep(interval)

async def main():
    async with TelegramClient('anon', API_ID, API_HASH) as client:
        print ('''
â „â „â „â „â „â „â „â „â „â „â „â „â „â¡ â ¢â â£‰â£‰â £â¢¦â¡€â „â „â „â „
â „â „â „â „â „â „â „â „â „â „â „â „â£â¢ªâ …â£±â£Ÿâ¢›â¢§â „â£·â „â „â „â „
â „â „â „â „â „â „â „â „â „â „â  â£¬â£€â£¢â£•â¡½â¢¯â£©â£³â£·â §â¡†â „â „â „
â „â „â „â „â „â „â „â „â „â¢ â¡­â¡¾â£†â¢¿â¡™â¢Ÿâ¢»â£¿â¡¿â¡¹â£¶â …â „â „â „
â „â „â „â „â „â „â „â „â „â£”â „â¡—â¢«â ˜â ·â ¾â ¿â Ÿâ ™â£¡â¢¢â¢–â „â „â „
â „â „â „â „â „â „â „â „â „â¢«â ºâ â¡¹â¢¸â£¿â£¿â£¿â¡Ÿâ ²â£¦â£Œâ¢„â¡‡â „â „
â „â „â „â „â „â „â „â „â¢€â¡ˆâ¢›â ¨â ¥â¡„â£¿â£¿â£¿â£§â¢¯â¡»â¡‡â ¨â£â „â „
â „â „â „â „â „â „â „â¢ â¡¤â¢ â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â¢—â µâ¡â¡£â¡„â „             
â „â „â „â „â „â „â „â ¸â¢¡â£¿â£¿â£¿â£¿â£¿â¢¿â£¿â£¿â£¿â£¿â£·â¡„â¢¶â¡‡â¡‡â „
â „â „â „â „â „â „â „â£ â£¿â£¿â£¿â£¿â£¿â Ÿâ¢¸â£¿â£¿â£¿â¡Ÿâ¡»â£¿â ˜â §â¡‡â „                
â „â „â „â „â „â „â „â¢³â£¿â£¿â£¿â¡¿â£«â£¾â£œâ¢¿â£¿â£¿â£·â£¶â¡¿â¢€â —â¡‡â „
â „â „â „â „â „â „â „â£¦â¡â£­â£µâ£¾â£¿â£¿â£¿â£¦â£â£›â£›â£«â ¡â£¼â¢¾â£¿â „
â „â „â „â „â „â „â¢°â£¿â¡‡â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â „â ¨â£¿â¡Ÿâ „
â „â „â „â „â „â¢€â£¿â¡¿â£¿â¢¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢†â£¶â£¿â ‡â „
â „â „â „â „â „â¢¸â£¿â£·â â¢¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¯â£¿â£·â£»â¡†â „
â „â „â „â „â¢€â£¿â£¿â â¢¸â¡Ÿâ¢¿â£¿â£¿â£¸â£¿â£¿â£¿â£¿â¢â£¾â£¿â£¿â£â£·â „
â „â „â „â „â£¸â£¿â â¢€â£¼â£¿â£â¡»â¢¿â£¿â£¿â£¿â ¿â££â£¾â£¿â£¿â£¿â£¿â£½â „
â „â „â „â „â£¿â¡¿â£°â£¿â£¿â£¿â£¿â£¿  â£°â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â „
               
Ñ‚Ğ³ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»Ñ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ° @truelilparrot
''')
        tasks = []
        for group_id, interval in group_intervals.items():
            try:
                entity = await client.get_entity(group_id)
                tasks.append(asyncio.create_task(send_messages(client, entity, interval)))
            except ValueError as ve:
                print(f"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ ĞºĞ°Ğ½Ğ°Ğ»Ğ° {group_id}: {ve}")
        await asyncio.gather(*tasks)

if __name__ == '__main__':
    loop = asyncio.get_event_loop()
    loop.run_until_complete(main())    
